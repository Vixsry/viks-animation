/*!
 * MIT LISENSI
 * Copyright (c) 27 Nov 2024 VIKRI AHPAD TANTOWI
 * Lisensi   : https://github.com/Vixsry/viks-animation/blob/main/LICENSE
 * Website   : https://viksanimation.my.id/
 * Github    : https://github.com/Vixsry/viks-animation
 * Author    : VIKRI AHPAD TANTOWI
 * Instagram : https://www.instagram.com/viksry12
 * Facebook  : https://www.facebook.com/share/1E17jqYu34/
 */
const VIKS={init(e={}){this.elements=document.querySelectorAll("[data-viks]"),this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.easingMap={linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)","ease-in":"cubic-bezier(0.420, 0.000, 1.000, 1.000)","ease-out":"cubic-bezier(0.000, 0.000, 0.580, 1.000)","ease-in-out":"cubic-bezier(0.420, 0.000, 0.580, 1.000)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)","ease-elastic":"cubic-bezier(0.5, 0.75, 0.150, 1.650)","ease-bounce":"cubic-bezier(0.3, 2.1, 0.6, 0.8)"},this.config={thresholdTop:.1,thresholdBottom:.1,disable:!1,startEvent:"DOMContentLoaded",animatedClassName:"viks-animate",initClassName:"viks-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50,offset:120,delay:0,duration:400,easing:"ease",once:!1,mirror:!1,anchorPlacement:"top-bottom",...e},this.applyGlobalStyles(),this.initializedElements=new Set,this.setupEventListeners(),this.initObserver(),this.initMutationObserver(),this.initResizeObserver()},applyGlobalStyles(){const e=document.createElement("style"),t=this.easingMap[this.config.easing]||this.config.easing;e.textContent=`\n      [data-viks] {\n        transition-duration: ${this.config.duration}ms;\n        transition-timing-function: ${t};\n      }\n      \n      /* Override for elements with specific easing */\n      ${Object.entries(this.easingMap).map((([e,t])=>`\n        [data-viks*="${e}"] {\n          transition-timing-function: ${t};\n        }\n      `)).join("\n")}\n    `,document.head.appendChild(e)},setupEventListeners(){let e;window.addEventListener("resize",(()=>{clearTimeout(e),e=setTimeout((()=>{this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.elements.forEach((e=>{this.updateElementPosition(e)}))}),this.config.debounceDelay)}));let t=0,i=!1;window.addEventListener("scroll",(()=>{t=window.scrollY,i||(window.requestAnimationFrame((()=>{this.elements.forEach((e=>{this.updateElementOnScroll(e,t)})),i=!1})),i=!0)}),{passive:!0}),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&this.elements.forEach((e=>{this.updateElementPosition(e)}))}))},initObserver(){const e={root:null,threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],rootMargin:`${this.config.offset}px`};this.observer=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target,i="off"!==t.getAttribute("data-viks-animation-top"),n="off"!==t.getAttribute("data-viks-animation-bottom"),s=t.getAttribute("data-viks-once")||this.config.once;if(e.isIntersecting)this.initializedElements.has(t)&&s||(this.applyAnimation(t),s&&this.initializedElements.add(t));else{const e=t.getBoundingClientRect().top>this.windowHeight;(e&&i||!e&&n)&&(s&&this.initializedElements.has(t)||this.removeAnimation(t))}}))}),e),this.elements.forEach((e=>{this.observer.observe(e),e.classList.add(this.config.initClassName)}))},initMutationObserver(){if(this.config.disableMutationObserver)return;new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&e.getAttribute("data-viks")&&(this.observer.observe(e),e.classList.add(this.config.initClassName))}))}))})).observe(document.body,{childList:!0,subtree:!0})},initResizeObserver(){const e=new ResizeObserver((e=>{e.forEach((e=>{e.target.hasAttribute("data-viks")&&this.updateElementPosition(e.target)}))}));this.elements.forEach((t=>{e.observe(t)}))},applyAnimation(e){const t=this.getDelay(e),i=this.getDuration(e),n=this.getEasing(e);e.style.transitionDuration=`${i}ms`,e.style.transitionDelay=`${t}ms`,e.style.transitionTimingFunction=n;const s=e.getAttribute("data-viks"),a=Object.keys(this.easingMap).find((e=>s?.includes(e))),o=this.easingMap[a]||this.easingMap[n]||n;e.style.transitionTimingFunction=o,requestAnimationFrame((()=>{e.classList.add(this.config.animatedClassName)})),e.dispatchEvent(new CustomEvent("viksAnimated",{bubbles:!0,detail:{animation:e.getAttribute("data-viks")}}));const r=e.getAttribute("data-viks-custom");r&&this.applyCustomAnimation(e,r),requestAnimationFrame((()=>{e.classList.add(this.config.animatedClassName)})),e.dispatchEvent(new CustomEvent("viksAnimated",{bubbles:!0,detail:{animation:e.getAttribute("data-viks")}}))},applyCustomAnimation(e,t){const i={bounce:()=>{e.style.animation="viksNoBounce 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},pulse:()=>{e.style.animation="viksPulse 1s cubic-bezier(0.4, 0, 0.6, 1)"}};i[t]&&i[t]()},removeAnimation(e){e.classList.remove(this.config.animatedClassName),e.dispatchEvent(new CustomEvent("viksHidden",{bubbles:!0,detail:{animation:e.getAttribute("data-viks")}}))},updateElementPosition(e){const t=e.getBoundingClientRect();e.setAttribute("data-viks-position",JSON.stringify({top:t.top,left:t.left,width:t.width,height:t.height}))},updateElementOnScroll(e,t){const i=JSON.parse(e.getAttribute("data-viks-position")||"{}"),n=this.config.offset;i.top-t<=this.windowHeight-n?this.applyAnimation(e):this.config.mirror&&this.removeAnimation(e)},getDelay(e){return parseInt(e.getAttribute("data-viks-delay"))||this.getAttributeFromString(e.getAttribute("data-viks"),"delay-")||this.config.delay},getDuration(e){return parseInt(e.getAttribute("data-viks-duration"))||this.getAttributeFromString(e.getAttribute("data-viks"),"duration-")||this.config.duration},getEasing(e){return e.getAttribute("data-viks-easing")||this.getAttributeFromString(e.getAttribute("data-viks"),"easing-")||this.config.easing},getAttributeFromString(e,t){if(!e)return null;const i=e.match(new RegExp(`${t}(\\d+)`));return i?parseInt(i[1]):null},shouldAnimate(e){if(this.config.disable)return!1;if("true"===e.getAttribute("data-viks-disabled"))return!1;const t=window.innerWidth,i=parseInt(e.getAttribute("data-viks-min-width"))||0,n=parseInt(e.getAttribute("data-viks-max-width"))||1/0;return t>=i&&t<=n},refresh(e){e&&e.hasAttribute("data-viks")&&(this.updateElementPosition(e),this.observer.unobserve(e),this.observer.observe(e))},refreshAll(){this.elements.forEach((e=>{this.refresh(e)}))},animate(e){e&&this.shouldAnimate(e)&&this.applyAnimation(e)},hide(e){e&&this.removeAnimation(e)},destroy(){this.elements.forEach((e=>{e.classList.remove(this.config.initClassName),e.classList.remove(this.config.animatedClassName),e.removeAttribute("data-viks-position"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-delay"),e.style.removeProperty("transition-timing-function"),e.style.removeProperty("animation"),this.observer.unobserve(e)})),window.removeEventListener("resize",this.setupEventListeners),window.removeEventListener("scroll",this.setupEventListeners),document.removeEventListener("visibilitychange",this.setupEventListeners)}},VIKSNumber={init(){this.elements=document.querySelectorAll('[data-viks*="type-nbr"]'),this.setupAnimations(),this.initializeObserver()},setupAnimations(){this.elements.forEach((e=>{const t=parseFloat(e.textContent);e.setAttribute("data-final-number",t),e.textContent="0",e.style.visibility="visible",e.style.opacity="1"}))},parseAttributes(e){const t=e.getAttribute("data-viks");return{duration:this.getAttributeValue(t,"duration-",2e3),fps:this.getAttributeValue(t,"fps-",60),bottomOff:t.includes("bottom-off"),bottomOn:t.includes("bottom-on"),topOff:t.includes("top-off"),topOn:t.includes("top-on")}},getAttributeValue(e,t,i){const n=e.match(new RegExp(`${t}(\\d+)`));return n?parseInt(n[1]):i},initializeObserver(){const e=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target,i=this.parseAttributes(t),n=i.topOn||!i.topOff&&!i.bottomOn,s=i.bottomOn||!i.bottomOff&&!i.topOn;if(e.isIntersecting){const a=e.boundingClientRect.top<e.rootBounds.top;(a&&s||!a&&n)&&this.animateNumber(t,i)}else(e.boundingClientRect.top>0&&n||e.boundingClientRect.top<0&&s)&&(t.textContent="0")}))}),{root:null,threshold:.1,rootMargin:"0px"});this.elements.forEach((t=>e.observe(t)))},animateNumber(e,t){const i=parseFloat(e.getAttribute("data-final-number")),n=1e3/t.fps,s=t.duration/n;let a=0;const o=()=>{a++;const t=(r=a/s)*(2-r);var r;const u=Math.round(i*t);e.textContent=this.formatNumber(u),a<s&&setTimeout((()=>requestAnimationFrame(o)),n)};requestAnimationFrame(o)},formatNumber:e=>(new Intl.NumberFormat).format(e)};class Viks3D{constructor(){this.elements=[],this.init()}init(){this.elements=Array.from(document.querySelectorAll('[data-viks="3D"]')),this.setupAnimations(),this.setupAnimations(),document.addEventListener("mousemove",this.handleMouseMove.bind(this))}setupAnimations(){this.elements.forEach((e=>{e.style.transition="transform 0.3s ease-out",e.style.transformStyle="preserve-3d",e.style.perspective="1000px",e.addEventListener("mouseenter",(()=>this.handleHover(e,!0))),e.addEventListener("mouseleave",(()=>this.handleHover(e,!1)))}))}handleMouseMove(e){this.elements.forEach((t=>{const i=t.getBoundingClientRect(),n=i.left+i.width/2,s=i.top+i.height/2,a=e.clientX-n,o=(e.clientY-s)/i.height*20,r=a/i.width*20;t.style.transform=`\n        rotateX(${-o}deg) \n        rotateY(${r}deg)\n        scale3d(1.05, 1.05, 1.05)\n      `}))}handleHover(e,t){t||(e.style.transform="rotateX(0) rotateY(0) scale3d(1, 1, 1)")}addShadow(){this.elements.forEach((e=>{e.style.boxShadow="0 10px 20px rgba(0,0,0,0.2)"}))}addParallax(e=30){this.elements.forEach((t=>{const i=t.children;Array.from(i).forEach(((t,i)=>{t.style.transform=`translateZ(${e*(i+1)}px)`}))}))}}const style=document.createElement("style");style.textContent='\n  [data-viks="3D"] {\n    cursor: pointer;\n    transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;\n    transform-style: preserve-3d;\n    perspective: 1000px;\n    will-change: transform;\n  }\n\n  [data-viks="3D"]:hover {\n    box-shadow: 0 15px 30px rgba(0,0,0,0.2);\n  }\n\n  [data-viks="3D"] * {\n    pointer-events: none;\n  }\n',document.head.appendChild(style),"undefined"!=typeof module&&module.exports?module.exports={VIKS:VIKS,VIKSNumber:VIKSNumber,Viks3D:Viks3D}:"function"==typeof define&&define.amd?define([],(function(){return{VIKS:VIKS,VIKSNumber:VIKSNumber,Viks3D:Viks3D}})):(window.VIKS=VIKS,window.VIKSNumber=VIKSNumber,window.Viks3D=Viks3D);