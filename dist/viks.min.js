/*!
 * MIT LISENSI
 * Copyright (c) 27 Nov 2024 VIKRI AHPAD TANTOWI
 * Lisensi   : https://github.com/Vixsry/viks-animation/blob/main/LICENSE
 * Website   : https://viksanimation.my.id/
 * Github    : https://github.com/Vixsry/viks-animation
 * Author    : VIKRI AHPAD TANTOWI
 * Instagram : https://www.instagram.com/viksry12
 * Facebook  : https://www.facebook.com/share/1E17jqYu34/
 */
const VIKS={init(t={}){this.elements=document.querySelectorAll("[data-viks]"),this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.easingMap={linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)","ease-in":"cubic-bezier(0.420, 0.000, 1.000, 1.000)","ease-out":"cubic-bezier(0.000, 0.000, 0.580, 1.000)","ease-in-out":"cubic-bezier(0.420, 0.000, 0.580, 1.000)","ease-in-sine":"cubic-bezier(0.47, 0, 0.745, 0.715)","ease-out-sine":"cubic-bezier(0.39, 0.575, 0.565, 1)","ease-in-out-sine":"cubic-bezier(0.445, 0.05, 0.55, 0.95)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-expo":"cubic-bezier(0.95, 0.05, 0.795, 0.035)","ease-out-expo":"cubic-bezier(0.19, 1, 0.22, 1)","ease-in-out-expo":"cubic-bezier(1, 0, 0, 1)","ease-in-circ":"cubic-bezier(0.6, 0.04, 0.98, 0.335)","ease-out-circ":"cubic-bezier(0.075, 0.82, 0.165, 1)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.15, 0.86)","ease-in-back":"cubic-bezier(0.6, -0.28, 0.735, 0.045)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","ease-in-out-back":"cubic-bezier(0.68, -0.55, 0.265, 1.55)","ease-elastic":"cubic-bezier(0.5, 0.75, 0.150, 1.650)","ease-bounce":"cubic-bezier(0.3, 2.1, 0.6, 0.8)"},this.config={thresholdTop:.1,thresholdBottom:.1,disable:!1,startEvent:"DOMContentLoaded",animatedClassName:"viks-animate",initClassName:"viks-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50,offset:120,delay:0,duration:400,easing:"ease",once:!1,mirror:!1,anchorPlacement:"top-bottom",animateTop:!0,animateBottom:!0,...t},this.applyGlobalStyles(),this.initializedElements=new Set,this.setupEventListeners(),this.initObserver(),this.initMutationObserver(),this.initResizeObserver()},applyGlobalStyles(){const t=document.createElement("style"),e=this.easingMap[this.config.easing]||this.config.easing;t.textContent=`\n      [data-viks] {\n        transition-duration: ${this.config.duration}ms;\n        transition-timing-function: ${e};\n      }\n      \n      /* Override for elements with specific easing */\n      ${Object.entries(this.easingMap).map((([t,e])=>`\n        [data-viks*="${t}"] {\n          transition-timing-function: ${e};\n        }\n      `)).join("\n")}\n    `,document.head.appendChild(t)},setupEventListeners(){let t;window.addEventListener("resize",(()=>{clearTimeout(t),t=setTimeout((()=>{this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth,this.elements.forEach((t=>{this.updateElementPosition(t)}))}),this.config.debounceDelay)}));let e=0,i=!1;window.addEventListener("scroll",(()=>{e=window.scrollY,i||(window.requestAnimationFrame((()=>{this.elements.forEach((t=>{this.updateElementOnScroll(t,e)})),i=!1})),i=!0)}),{passive:!0}),document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&this.elements.forEach((t=>{this.updateElementPosition(t)}))}))},initObserver(){const t={root:null,threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],rootMargin:`${this.config.offset}px`};this.observer=new IntersectionObserver((t=>{t.forEach((t=>{const e=t.target,i="off"!==e.getAttribute("data-viks-animation-top")&&this.config.animateTop,n="off"!==e.getAttribute("data-viks-animation-bottom")&&this.config.animateBottom,s=e.getAttribute("data-viks-once")||this.config.once;if(t.isIntersecting)this.initializedElements.has(e)&&s||(this.applyAnimation(e),s&&this.initializedElements.add(e));else{const t=e.getBoundingClientRect().top>this.windowHeight;(t&&i||!t&&n)&&(s&&this.initializedElements.has(e)||this.removeAnimation(e))}}))}),t),this.elements.forEach((t=>{this.observer.observe(t),t.classList.add(this.config.initClassName)}))},updateAnimationSettings(t={}){this.config={...this.config,...t},this.refreshAll()},initMutationObserver(){if(this.config.disableMutationObserver)return;new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{1===t.nodeType&&t.getAttribute("data-viks")&&(this.observer.observe(t),t.classList.add(this.config.initClassName))}))}))})).observe(document.body,{childList:!0,subtree:!0})},initResizeObserver(){const t=new ResizeObserver((t=>{t.forEach((t=>{t.target.hasAttribute("data-viks")&&this.updateElementPosition(t.target)}))}));this.elements.forEach((e=>{t.observe(e)}))},applyAnimation(t){const e=this.getDelay(t),i=this.getDuration(t),n=this.getEasing(t);t.style.transitionDuration=`${i}ms`,t.style.transitionDelay=`${e}ms`,t.style.transitionTimingFunction=n;const s=t.getAttribute("data-viks"),a=Object.keys(this.easingMap).find((t=>s?.includes(t))),o=this.easingMap[a]||this.easingMap[n]||n;t.style.transitionTimingFunction=o,requestAnimationFrame((()=>{t.classList.add(this.config.animatedClassName)})),t.dispatchEvent(new CustomEvent("viksAnimated",{bubbles:!0,detail:{animation:t.getAttribute("data-viks")}}));const r=t.getAttribute("data-viks-custom");r&&this.applyCustomAnimation(t,r),requestAnimationFrame((()=>{t.classList.add(this.config.animatedClassName)})),t.dispatchEvent(new CustomEvent("viksAnimated",{bubbles:!0,detail:{animation:t.getAttribute("data-viks")}}))},applyCustomAnimation(t,e){const i={bounce:()=>{t.style.animation="viksNoBounce 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},pulse:()=>{t.style.animation="viksPulse 1s cubic-bezier(0.4, 0, 0.6, 1)"}};i[e]&&i[e]()},removeAnimation(t){t.classList.remove(this.config.animatedClassName),t.dispatchEvent(new CustomEvent("viksHidden",{bubbles:!0,detail:{animation:t.getAttribute("data-viks")}}))},updateElementPosition(t){const e=t.getBoundingClientRect();t.setAttribute("data-viks-position",JSON.stringify({top:e.top,left:e.left,width:e.width,height:e.height}))},updateElementOnScroll(t,e){const i=JSON.parse(t.getAttribute("data-viks-position")||"{}"),n=this.config.offset;i.top-e<=this.windowHeight-n?this.applyAnimation(t):this.config.mirror&&this.removeAnimation(t)},getDelay(t){return parseInt(t.getAttribute("data-viks-delay"))||this.getAttributeFromString(t.getAttribute("data-viks"),"delay-")||this.config.delay},getDuration(t){return parseInt(t.getAttribute("data-viks-duration"))||this.getAttributeFromString(t.getAttribute("data-viks"),"duration-")||this.config.duration},getEasing(t){return t.getAttribute("data-viks-easing")||this.getAttributeFromString(t.getAttribute("data-viks"),"easing-")||this.config.easing},getAttributeFromString(t,e){if(!t)return null;const i=t.match(new RegExp(`${e}(\\d+)`));return i?parseInt(i[1]):null},shouldAnimate(t){if(this.config.disable)return!1;if("true"===t.getAttribute("data-viks-disabled"))return!1;const e=window.innerWidth,i=parseInt(t.getAttribute("data-viks-min-width"))||0,n=parseInt(t.getAttribute("data-viks-max-width"))||1/0;return e>=i&&e<=n},refresh(t){t&&t.hasAttribute("data-viks")&&(this.updateElementPosition(t),this.observer.unobserve(t),this.observer.observe(t))},refreshAll(){this.elements.forEach((t=>{this.refresh(t)}))},animate(t){t&&this.shouldAnimate(t)&&this.applyAnimation(t)},hide(t){t&&this.removeAnimation(t)},destroy(){this.elements.forEach((t=>{t.classList.remove(this.config.initClassName),t.classList.remove(this.config.animatedClassName),t.removeAttribute("data-viks-position"),t.style.removeProperty("transition-duration"),t.style.removeProperty("transition-delay"),t.style.removeProperty("transition-timing-function"),t.style.removeProperty("animation"),this.observer.unobserve(t)})),window.removeEventListener("resize",this.setupEventListeners),window.removeEventListener("scroll",this.setupEventListeners),document.removeEventListener("visibilitychange",this.setupEventListeners)}},VIKSNumber={init(){this.elements=document.querySelectorAll('[data-viks*="type-nbr"]'),this.setupAnimations(),this.initializeObserver()},setupAnimations(){this.elements.forEach((t=>{const e=parseFloat(t.textContent);t.setAttribute("data-final-number",e),t.textContent="0",t.style.visibility="visible",t.style.opacity="1"}))},parseAttributes(t){const e=t.getAttribute("data-viks");return{duration:this.getAttributeValue(e,"duration-",2e3),fps:this.getAttributeValue(e,"fps-",60),bottomOff:e.includes("bottom-off"),bottomOn:e.includes("bottom-on"),topOff:e.includes("top-off"),topOn:e.includes("top-on")}},getAttributeValue(t,e,i){const n=t.match(new RegExp(`${e}(\\d+)`));return n?parseInt(n[1]):i},initializeObserver(){const t=new IntersectionObserver((t=>{t.forEach((t=>{const e=t.target,i=this.parseAttributes(e),n=i.topOn||!i.topOff&&!i.bottomOn,s=i.bottomOn||!i.bottomOff&&!i.topOn;if(t.isIntersecting){const a=t.boundingClientRect.top<t.rootBounds.top;(a&&s||!a&&n)&&this.animateNumber(e,i)}else(t.boundingClientRect.top>0&&n||t.boundingClientRect.top<0&&s)&&(e.textContent="0")}))}),{root:null,threshold:.1,rootMargin:"0px"});this.elements.forEach((e=>t.observe(e)))},animateNumber(t,e){const i=parseFloat(t.getAttribute("data-final-number")),n=1e3/e.fps,s=e.duration/n;let a=0;const o=()=>{a++;const e=(r=a/s)*(2-r);var r;const u=Math.round(i*e);t.textContent=this.formatNumber(u),a<s&&setTimeout((()=>requestAnimationFrame(o)),n)};requestAnimationFrame(o)},formatNumber:t=>(new Intl.NumberFormat).format(t)};class Viks3D{constructor(){this.elements=[],this.init()}init(){this.elements=Array.from(document.querySelectorAll('[data-viks="3D"]')),this.setupAnimations(),this.setupAnimations(),document.addEventListener("mousemove",this.handleMouseMove.bind(this))}setupAnimations(){this.elements.forEach((t=>{t.style.transition="transform 0.3s ease-out",t.style.transformStyle="preserve-3d",t.style.perspective="1000px",t.addEventListener("mouseenter",(()=>this.handleHover(t,!0))),t.addEventListener("mouseleave",(()=>this.handleHover(t,!1)))}))}handleMouseMove(t){this.elements.forEach((e=>{const i=e.getBoundingClientRect(),n=i.left+i.width/2,s=i.top+i.height/2,a=t.clientX-n,o=(t.clientY-s)/i.height*20,r=a/i.width*20;e.style.transform=`\n        rotateX(${-o}deg) \n        rotateY(${r}deg)\n        scale3d(1.05, 1.05, 1.05)\n      `}))}handleHover(t,e){e||(t.style.transform="rotateX(0) rotateY(0) scale3d(1, 1, 1)")}addShadow(){this.elements.forEach((t=>{t.style.boxShadow="0 10px 20px rgba(0,0,0,0.2)"}))}addParallax(t=30){this.elements.forEach((e=>{const i=e.children;Array.from(i).forEach(((e,i)=>{e.style.transform=`translateZ(${t*(i+1)}px)`}))}))}}const style=document.createElement("style");style.textContent='\n  [data-viks="3D"] {\n    cursor: pointer;\n    transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;\n    transform-style: preserve-3d;\n    perspective: 1000px;\n    will-change: transform;\n  }\n\n  [data-viks="3D"]:hover {\n    box-shadow: 0 15px 30px rgba(0,0,0,0.2);\n  }\n\n  [data-viks="3D"] * {\n    pointer-events: none;\n  }\n',document.head.appendChild(style),"undefined"!=typeof module&&module.exports?module.exports={VIKS:VIKS,VIKSNumber:VIKSNumber,Viks3D:Viks3D}:"function"==typeof define&&define.amd?define([],(function(){return{VIKS:VIKS,VIKSNumber:VIKSNumber,Viks3D:Viks3D}})):(window.VIKS=VIKS,window.VIKSNumber=VIKSNumber,window.Viks3D=Viks3D);